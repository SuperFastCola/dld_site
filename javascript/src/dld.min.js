!function(win){win.console||(console={log:function(){}}),"undefined"==typeof win.matchMedia&&(this.matchMedia=function(myvar){return!1});var internal={};win.dld=internal;var app=angular.module("projectTriage",["ngSanitize","ngRoute"]);app.directive("myCreateNav",function(){return!0}),app.controller("listProjects",function($scope,$compile,$sce,$rootScope,$http,$route,$routeParams,$location,$filter){$scope.projects=null,$scope.contents=null,$scope.types=null,$scope.selectedType="",$scope.excludeIllos=!0,$scope.selectedProject=null,$scope.projectsHidden=!1,$scope.sprites=null,$scope.createHamburger=function(rotate){var menu=document.getElementById("hamburger"),c=menu.getContext("2d"),w=40,h=40,lines=3,lineLength=20,lineWidth=3,lineColor="#fff",lineSpacing=7.25,lineStart=12;menu.width=w,menu.height=h,c.clearRect(0,0,w,w),c.globalAlpha=1;for(var i=0;lines>i;i++){var positionY=0==i?lineStart:lineStart+lineSpacing*i,padding=(w-lineLength)/2;c.beginPath(),c.lineWidth=lineWidth,c.strokeStyle=lineColor,c.lineCap="round","undefined"!=typeof rotate&&rotate?(c.moveTo(positionY,padding),c.lineTo(positionY,w-padding)):(c.moveTo(padding,positionY),c.lineTo(w-padding,positionY)),c.stroke()}$scope.$broadcast("scrollTop",{scrollTop:0})},$scope.currentDate=new Date,$scope.cacheBuster=0,$scope.clipBody=!1,$scope.returnClipBody=function(val){return $scope.clipBody="undefined"==typeof val?!1:val,$scope.clipBody},$scope.setBackgroundThumbnailImage=function(obj){0===$scope.cacheBuster&&($scope.currentDate=new Date,$scope.cacheBuster=$scope.currentDate.getTime());var images_sub_directory="images/full/";return"undefined"!=typeof window.matchMedia&&(images_sub_directory="images/"+(window.matchMedia("(min-width: 320px)").matches&&window.matchMedia("(max-width: 480px)").matches?"mobile":"full")+"/"),obj.source+="?="+$scope.cacheBuster,"undefined"==typeof obj.detail&&(images_sub_directory+="thumbs/"),"undefined"!=typeof obj.returnURL?String(images_sub_directory+obj.source):{backgroundImage:"url("+String(images_sub_directory+obj.source)+")"}},$scope.getPath=function(){var parts=$location.path().split("/");if("project"==parts[1])$scope.showProjectDetails(),$scope.projectsHidden=!0;else for(var i in $scope.types)String(parts[1]).match($scope.types[i])&&($scope.showNav=!0,$scope.setType($scope.types[i],i))},$scope.returnVideoURL=function(val){return $sce.trustAsResourceUrl(val)},$scope.parseResponse=function(response){$scope.types=response.types,$scope.projects=response.projects,$scope.contents=response.contents,$scope.sprites=response.sprites,$scope.createHamburger(),$scope.getPath(),$scope.renderSprites()},$scope.createSpriteObject=function(val){var header=angular.element(document.getElementById("portfolio_header"));val.el=document.createElement("div"),angular.element(val.el).addClass("sprite"),angular.element(val.el).attr("id",val.sprite_id),$scope.createAnimationStyle(val),header.append(val.el)},$scope.renderSprites=function(){for(var i in $scope.sprites)$scope.createSpriteObject($scope.sprites[i])},$scope.setAnimationMultiplier=function(width){var number=0;return number=700>width?3:width>1200?15:9},$scope.createAnimationStyle=function(obj){obj.styleid="ani_style_"+obj.sprite_id,"undefined"!=typeof document.getElementById(obj.styleid)&&null!=document.getElementById(obj.styleid)&&angular.element(document.getElementById(obj.styleid)).remove();var prefix=String(navigator.userAgent).match(/webkit/)?"-webkit-":"";obj.sprite_ani_name="sprite_ani_"+obj.sprite_id;var direction=Math.round(Math.random()%2),styles="@"+prefix+"keyframes "+obj.sprite_ani_name+" {\n";styles+="	0% {background-position: "+obj.xCoor[direction][0]+"px "+obj.yCoor[0]+"px;}\n",styles+="	100% {background-position: "+obj.xCoor[direction][1]+"px "+obj.yCoor[1]+"px;}\n",styles+="}\n",styles+="\n#"+obj.sprite_id+"{\n",styles+="	z-index:"+obj.position[1]+";\n",styles+="	"+prefix+"animation-name: "+obj.sprite_ani_name+";\n",styles+="	"+prefix+"animation-duration: "+obj.walk_speed+";\n",styles+="	"+prefix+"animation-timing-function: steps(2);\n",styles+="	"+prefix+"animation-delay: 0s;\n",styles+="	"+prefix+"animation-iteration-count: infinite;\n",styles+="	"+prefix+"animation-direction: alternate;\n",styles+="	"+prefix+"animation-play-state: running;\n";var parent_width=document.getElementById(obj.parent_element).getBoundingClientRect().width,multiplier=$scope.setAnimationMultiplier(parent_width);String(obj.sprite_id).match(/bird/)&&(multiplier=600>parent_width?2:4);var randomTime=Math.ceil(Math.random()*multiplier);multiplier/2>randomTime&&(randomTime=multiplier/2+Math.ceil(3*Math.random()));var delayTime=Math.ceil(Math.random()*(600>parent_width?6:3));styles+="	"+prefix+"transition: "+prefix+"transform "+randomTime+"s;\n",styles+="	"+prefix+"transition-timing-function: linear;\n",styles+="	"+prefix+"transition-delay: "+delayTime+"s;\n",styles+="	width:"+obj.dimensions[0]+"px;\n",styles+="	height:"+obj.dimensions[1]+"px;\n",styles+="	top:"+obj.position[1]+"px;\n",styles+="	"+prefix+"transform: translateX("+(Boolean(direction)?String("-"+obj.dimensions[0]):parent_width)+"px);\n",styles+="}\n",styles+="\n#"+obj.sprite_id+".move{\n",styles+="	"+prefix+"transform: translateX("+(Boolean(direction)?parent_width:String("-"+obj.dimensions[0]))+"px);\n",styles+="}\n";var head=document.head||document.getElementsByTagName("head")[0],anistyle=document.createElement("style");anistyle.id=obj.styleid,anistyle.text="text/css",anistyle.media="screen",head.appendChild(anistyle),anistyle.styleSheet?anistyle.styleSheet.cssText=styles:anistyle.appendChild(document.createTextNode(styles)),obj.el.addEventListener("webkitTransitionEnd",function(){$scope.animationCallback.call(obj)},!1),obj.el.addEventListener("transitionend",function(){$scope.animationCallback.call(obj)},!1),obj.el.addEventListener("oTransitionEnd",function(){$scope.animationCallback.call(obj)},!1),setTimeout(function(){angular.element(document.getElementById(obj.sprite_id)).addClass("move")},1e3)},$scope.animationCallback=function(){angular.element(document.getElementById(this.sprite_id)).remove(),$scope.createSpriteObject(this)},$scope.showNav=!1,$scope.showDescription=!1,$scope.navSlider=function($event){"undefined"!=typeof $event&&$event.stopPropagation(),$scope.showNav=!$scope.showNav,$scope.showNav||window.scrollTo(0,0),$scope.showDescription=!0,$scope.hideProject($event),$scope.createHamburger($scope.showNav)},$scope.hideProject=function($event){delete $scope.projectImage,$scope.descriptionImageLoaded(),$scope.projectsHidden=!1,$scope.projectImage="//:0",$scope.setInfoExpandedForDevice(),"undefined"!=typeof $event&&$event.stopPropagation(),window.scrollTo(0,0),$scope.returnClipBody(),$scope.showDescription=!$scope.showDescription},$scope.setProjectDetails=function(obj){$scope.project=obj},$scope.contentSection=!1,$scope.setContentSection=function(val){return delete $scope.contentSectioninfo,$scope.contentSection="undefined"==typeof val?!1:val,$scope.contentSection},$scope.setType=function(type,index){switch($scope.selectedType=type,$scope.setContentSection(),type){case"all":$scope.selectedType="";break;case"about":$scope.setContentSection(!0),$scope.contentSectioninfo=$scope.contents[index],$scope.downloadContent($scope.contents[index])}$scope.cacheBuster=0,$scope.navSlider(),window.scrollBy(0,2)},$scope.getFilter=function(){return"illustration"===$scope.selectedType?{type:$scope.selectedType}:{type:$scope.selectedType||void 0||"!illustration"||"!about"}},$scope.$watch("scrollTop",function(newVal,oldVal){newVal!=oldVal&&$scope.$broadcast("scrollTop",{scrollTop:newVal})}),$scope.$watch("mobile",function(newVal,oldVal){newVal!=oldVal&&$scope.$broadcast("windowResize",{newWidth:newVal})}),$scope.checkMobile=function(){$scope.mobile=window.matchMedia("(min-width: 320px)").matches&&window.matchMedia("(max-width: 480px)").matches?"mobile":"full"},$scope.mobile="full",$scope.isActiveProject=function(index){return $scope.selectedProject===index},angular.element(document).ready(function(){$http.get("/projects.json").success($scope.parseResponse)}),$scope.hideHamburger=function(){return $scope.showDescription?!0:!1},$scope.descriptionImageLoaded=function(){return"//:0"!=this.projectImage&&"undefined"!=typeof this.projectImage?!0:!1},$scope.setInfoExpandedForDevice=function(){"full"==$scope.mobile?$scope.showAllInfo=!0:$scope.showAllInfo=!1},$scope.checkMobile(),$scope.setInfoExpandedForDevice(),$scope.expandInfo=function(){$scope.showAllInfo=!$scope.showAllInfo,$scope.showAllInfo||window.scrollTo(0,0)},$scope.expandForIllo=!1,$scope.illustrationType=function(types){$scope.expandForIllo=!1;for(var i in types)"illustration"==types[i]&&($scope.expandForIllo=!0)},$scope.loadBackground=function(scope){scope.imageLoading&&(scope.imageLoading=!1,scope.backgroundImage=scope.setBackgroundThumbnailImage({source:scope.x.image,returnURL:!0}),$http({method:"GET",responseType:"arraybuffer",url:scope.backgroundImage}).then(function(response){scope.imageLoaded=!0;var blob=new Blob([response.data],{type:"image/jpeg"});scope.backgroundStyle={backgroundImage:"url("+(window.URL||window.webkitURL).createObjectURL(blob)+")"}},function(response){console.log(response)}))},$scope.contentImage="//:0",$scope.setContentImageSource=function(data){$scope.contentImage="undefined"!=typeof data?data:null,$scope.$apply()},$scope.loadImage=function(file){console.log(file),$http({method:"GET",url:file,responseType:"blob"}).then(function(response){fr=new FileReader,fr.onload=function(){$scope.setContentImageSource(fr.result)},fr.readAsDataURL(response.data)},function(response){console.log(response)})},$scope.setDownloadedContent=function(val,scope){var oldEle=angular.element(document.getElementById("content-body-holder"));oldEle.empty().append($compile(val)(oldEle.scope))},$scope.downloadContent=function(scope){$http({method:"GET",url:"/"+scope.contentFile}).then(function(response){angular.element(document).find("#content-body-holder");$scope.setDownloadedContent(response.data,scope)},function(response){console.log(response)})},$scope.showProjectDetails=function(passedScope){var scope="undefined"!=typeof passedScope?passedScope:$scope,scopeParent="undefined"!=typeof scope.$parent.showDescription?scope.$parent:$scope,parts=$location.path().split("/"),scopeProjectProperties="undefined"!=typeof scope.x?scope.x:$filter("filter")($scope.projects,{id:parts[2]})[0];scopeParent.showDescription=!scopeParent.showDescription,console.log(scopeParent.showDescription),scopeParent.returnClipBody(!0),"undefined"!=typeof scopeProjectProperties.image&&(scope.backgroundImage=scope.setBackgroundThumbnailImage({source:scopeProjectProperties.image,detail:!0,returnURL:!0})),scopeParent.setProjectDetails(scopeProjectProperties),scopeParent.illustrationType(scopeProjectProperties.type),$http({method:"GET",responseType:"arraybuffer",url:scope.backgroundImage}).then(function(response){var blob=new Blob([response.data],{type:"image/jpeg"});scopeParent.projectImage=(window.URL||window.webkitURL).createObjectURL(blob),scope.descriptionImageLoaded()},function(response){console.log(response)})}}),app.directive("autoresize",function($window){return function($scope){return $scope.initializeWindowSize=function(){return $scope.maxHeight=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight,window.innerHeight),$scope.scrollTop=$window.pageYOffset,$scope.windowHeight=$window.innerHeight,$scope.viewBottom=$scope.windowHeight,$scope.windowWidth=$window.innerWidth},$scope.initializeWindowSize(),angular.element($window).bind("resize",function(){return $scope.initializeWindowSize(),$scope.cacheBuster=0,$scope.$broadcast("scrollTop",{scrollTop:$scope.scrollTop}),$scope.checkMobile(),$scope.$apply()})}}),app.controller("aboutController",function($scope,$routeParams){console.log($routeParams)}),app.directive("scrollposition",function($window){return function($scope){return angular.element($window).bind("scroll",function(){return $scope.scrollTop=$window.pageYOffset,$scope.viewBottom=$window.pageYOffset+$window.innerHeight,$scope.$apply()})}}),app.directive("showOnHoverParent",function(){return{link:function(scope,element,attrs){element.parent().bind("mouseover",function(){element.removeClass("hidden")}),element.parent().bind("mouseleave",function(){element.addClass("hidden")})}}}),app.directive("checkObjectPosition",function($http){return{link:function(scope,element,attrs){element[0].getBoundingClientRect().top<scope.$parent.viewBottom&&scope.$parent.loadBackground(scope),scope.$on("windowResize",function(event,args){var testStyle=null;if("undefined"!=typeof scope.backgroundStyle&&"undefined"!=typeof scope.backgroundStyle.backgroundImage)var testStyle=String(scope.backgroundStyle.backgroundImage).match(scope.$parent.mobile);null==testStyle&&(scope.backgroundStyle=scope.setBackgroundThumbnailImage({source:scope.x.image}))}),scope.$on("scrollTop",function(event,args){element[0].getBoundingClientRect().top<window.innerHeight&&"undefined"==typeof scope.backgroundStyle&&scope.$parent.loadBackground(scope)})}}}),app.directive("hideOnHoverParent",function(){return{link:function(scope,element,attrs){element.parent().bind("mouseover",function(){element.addClass("hidden")}),element.parent().bind("mouseleave",function(){element.removeClass("hidden")})}}}),app.directive("showOnClick",function($http){return{link:function(scope,element,attrs){element.bind("click",function($event){scope.$parent.showProjectDetails(scope)})}}})}(window);